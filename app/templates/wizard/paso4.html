{% extends "base.html" %}

{% block title %}Paso {{ paso_actual }} - Recursos{% endblock %}

{% block content %}
<div class="wizard-container">
    <!-- Barra de progreso -->
    {% include "components/progress_bar.html" %}

    <!-- Contenido del paso -->
    <div class="wizard-content">
        <div class="wizard-header">
            <span class="step-badge">Paso {{ paso_actual }} de {{ total_pasos }}</span>
            <h2 class="wizard-title">Listado de Recursos</h2>
            <p class="wizard-description">
                Recursos humanos, materiales y econ√≥micos disponibles en el lugar.
            </p>
        </div>

        <form action="{{ url_for('formulario.paso', num=paso_actual) }}" method="POST" class="wizard-form">
            <!-- Recursos Humanos -->
            <fieldset class="form-fieldset">
                <legend class="fieldset-legend">
                    <span class="legend-icon">üë•</span>
                    Recursos Humanos
                    <span class="legend-hint">(Escriba la cantidad)</span>
                </legend>
                
                <div class="resources-grid">
                    {% for item in recursos_humanos %}
                        <div class="resource-item">
                            <label for="item_RH{{ item.orden }}" class="resource-label">
                                <span class="resource-num">{{ item.orden }}</span>
                                {{ item.descripcion }}
                            </label>
                            <input type="number" 
                                   id="item_{{ item.codigo }}" 
                                   name="item_{{ item.codigo }}" 
                                   class="form-input form-input-sm"
                                   value="{{ respuestas.get(item.codigo, '') }}"
                                   min="0" 
                                   placeholder="0">
                        </div>
                    {% endfor %}
                </div>
            </fieldset>

            <!-- Recursos Materiales -->
            <fieldset class="form-fieldset">
                <legend class="fieldset-legend">
                    <span class="legend-icon">üì¶</span>
                    Recursos Materiales
                </legend>
                
                <div class="factors-table">
                    <div class="factors-header factors-header-simple">
                        <div class="factor-cell factor-num">#</div>
                        <div class="factor-cell factor-desc">Material</div>
                        <div class="factor-cell factor-option-wide">S√ç</div>
                        <div class="factor-cell factor-option-wide">NO</div>
                    </div>

                    {% for item in recursos_materiales %}
                        <div class="factors-row">
                            <div class="factor-cell factor-num">{{ item.orden }}</div>
                            <div class="factor-cell factor-desc">{{ item.descripcion }}</div>
                            <div class="factor-cell factor-option-wide">
                                <input type="radio" 
                                       id="item_{{ item.codigo }}_si" 
                                       name="item_{{ item.codigo }}" 
                                       value="si"
                                       class="radio-hidden"
                                       {% if respuestas.get(item.codigo) == true %}checked{% endif %}>
                                <label for="item_{{ item.codigo }}_si" class="radio-label radio-si">S√ç</label>
                            </div>
                            <div class="factor-cell factor-option-wide">
                                <input type="radio" 
                                       id="item_{{ item.codigo }}_no" 
                                       name="item_{{ item.codigo }}" 
                                       value="no"
                                       class="radio-hidden"
                                       {% if respuestas.get(item.codigo) == false %}checked{% endif %}>
                                <label for="item_{{ item.codigo }}_no" class="radio-label radio-no">NO</label>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </fieldset>

            <!-- Recursos Econ√≥micos -->
            <fieldset class="form-fieldset">
                <legend class="fieldset-legend">
                    <span class="legend-icon">üí∞</span>
                    Recursos Econ√≥micos
                </legend>
                
                <div class="factors-table">
                    <div class="factors-header factors-header-simple">
                        <div class="factor-cell factor-num">#</div>
                        <div class="factor-cell factor-desc">Recurso</div>
                        <div class="factor-cell factor-option-wide">S√ç</div>
                        <div class="factor-cell factor-option-wide">NO</div>
                    </div>

                    {% for item in recursos_economicos %}
                        <div class="factors-row">
                            <div class="factor-cell factor-num">{{ item.orden }}</div>
                            <div class="factor-cell factor-desc">{{ item.descripcion }}</div>
                            <div class="factor-cell factor-option-wide">
                                <input type="radio" 
                                       id="item_{{ item.codigo }}_si" 
                                       name="item_{{ item.codigo }}" 
                                       value="si"
                                       class="radio-hidden"
                                       {% if respuestas.get(item.codigo) == true %}checked{% endif %}>
                                <label for="item_{{ item.codigo }}_si" class="radio-label radio-si">S√ç</label>
                            </div>
                            <div class="factor-cell factor-option-wide">
                                <input type="radio" 
                                       id="item_{{ item.codigo }}_no" 
                                       name="item_{{ item.codigo }}" 
                                       value="no"
                                       class="radio-hidden"
                                       {% if respuestas.get(item.codigo) == false %}checked{% endif %}>
                                <label for="item_{{ item.codigo }}_no" class="radio-label radio-no">NO</label>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </fieldset>

            <!-- Navegaci√≥n -->
            <div class="wizard-nav">
                <div class="nav-left">
                    <button type="submit" name="accion" value="anterior" class="btn btn-secondary">
                        <span class="btn-arrow">‚Üê</span>
                        Anterior
                    </button>
                </div>
                <div class="nav-right">
                    <button type="submit" name="accion" value="siguiente" class="btn btn-primary">
                        Siguiente
                        <span class="btn-arrow">‚Üí</span>
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}
